% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

%%% DOCUMENT DEFINITION
\documentclass[11pt, french]{article} % use larger type; default would be 10pt
\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
\geometry{margin=2cm} % for example, change the margins to 2 inches all round

%%% PACKAGES
\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
\usepackage[frenchb]{babel}

\usepackage{picins,caption}
\usepackage{wrapfig}



%%% HEADERS & FOOTERS
%\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
%\pagestyle{fancy} % options: empty , plain , fancy

% Rapport projet pluridisciplinaire : etude thermique du pont en H
% : Xavier Galzin, Stanislas Bertrand, Romain Desille, Frédéric Meslin

\title{\textsc{Projet Pluridisciplinaire} \\ Rapport Solution Analogique}
\author{Xavier GALZIN, Stanislas BERTRAND, Romain DESILLE, Frédéric MESLIN}
\date{19/03/2012}

\begin{document}
\maketitle

\pagebreak

\section*{Introduction}
Liste
\\- Rappel des objectifs
\\- liens avec l'étude automatique

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Capteur & Conditionnement -> Stan
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Capteur \& Conditionnement}
\subsection{Capteur à Effet Hall}


\subparagraph*{Principe du capteur à Effet Hall}~\\
\begin{minipage}[t]{10cm}
\vspace{-0.3cm}
\parpic{\includegraphics[width=5cm]{SolutionAnalogique/capteur_effet_hall}}
Un capteur à effet Hall permet de mesurer le champ magnétique $B$ grace à la déformation d'un courant $I_0$ dans un conducteur, ou semi-conducteur, soumis à ce champ. La déformation du flux d'élection génère une différence de potentielle aux bords du conducteur : $V_h =K_h \cdot B \cdot I_0$. Cette relation concidère $B$ comme le champ mangétique normal à la surface du conducteur.
\end{minipage}


\subparagraph*{Imaplantation}~\\
\begin{minipage}[t]{10cm}
Pour mesurer les champs magnétique de la bobine et du mobile, deux capteurs à effet Hall, Allegro A1302, sont placés à chaque extrémité de la bobine. L'alignement de la bobine, du mobile et des capteurs est important car c'est le champ magnétique normal au capteur qui est mesuré. Il est ainsi possible de connaitre la position du mobile, les deux capteurs étant placé symétriquement sur la bobine, ils mesurent le même champ résultant. Le champ résultant du mobile n'est pas le même pour les deux capteurs, le champ diminue avec la distance. Le bilan de champs magnétique sur les capteur est le suivant :
\vspace{-0.3cm} \[B_{H2} = B_{Bob} + B_{Mob~Dist_{Mob-H2}}\]
\vspace{-0.8cm} \[B_{H1} = B_{Bob} + B_{Mob~Dist_{Mob-H1}}\]
L'image de la position du mobile est contenue dans  $B_{Mob~Dist_{Mob-H2}}$ et $B_{Mob~Dist_{Mob-H1}}$. L'image est obtenue par différence de $B_{H2}$ et $B_{H1}$, $V_{H2}-V_{H1}$
\end{minipage}
~
\begin{minipage}[t]{8cm}
\vspace{-7cm}
\piccaption{Implantation des capteurs}
\parpic{\includegraphics[width=8cm]{SolutionAnalogique/EffetHall}}
\end{minipage}


\subparagraph*{Caractéristiques électronique}~\\
Les capteurs Allegro A1302 convennent à notre application car ils sont optimisé pour des systèmes de positionnement linéaire ou radial. Le capteur peut être alimenté par une tension de 5V, tension utilisé pour nos montage analogique. Le signal de sortie ne necessite aucun traitement car la mesure effectuée est filtrée et amplifiée en interne et le niveau de sortie est directement compatible. Le circuit a une faible impédence de sortie, caractéristique importante pour les montages réalisés par la suite.

\subsection{Montage différentiel}

\begin{wrapfigure}{r}{8cm}
  \includegraphics[width=8cm]{SolutionAnalogique/AmpInst}
  \caption{Amplificateur d'instrumentation}
\end{wrapfigure}
Le montage amplificateur d'instrumentation a été choisi pour son gain différentiel réglable, ses impédences d'entrées importantes et sa faible impédence de sortie, son taux de réjection mode commun important grâce à l'étage d'entré symétrique. Il est réalisé avec des AOP LM324.

\textbf{Fred, les impédences sont du au choix de l'AOP mais je sais pas trop comment validé/vérifierb (Choix des AOPs ( Prix, Dispo, Package ))}

Ce montage n'est pas réalisé de manière intégré ce qui dégrade ces performances notamment à cause des précisions des résistances $R$.

L'étude du schema donne la relation suivante : $V_s=(1+2 \frac{R}{R0})(V_1-V_2) + V_{offset}$. La mesure de la tension maximale de sortie permet de régler la valeur de l'offset, $V_{offset}=\frac{V_{max}}{2}$, $V_{max}=3.7$V. Cela permet de maximiser les variations du signal en le centrant sur la plage de sortie de l'AOP.

\subsection{Consigne Analogique}
La conception initiale ne prévoyait pas de consigne analogique mais seulement une consigne numérique. Il s'est avéré intéressant d'ajouter une consigne analogique car elle permet de maximiser l'amplitude pour l'aquisition dans le microcontroller conjointement avec l'offset.

L'ajout de la consigne 

\begin{figure}[h!]
  \includegraphics{SolutionAnalogique/AmpInstCons}
  \label{}
  \caption{Différentiel avec consigne}
\end{figure}

Liste
\\- Consigne numérique vers consigne analogique
\\- Retour : implantation analgoqie
\\- - Gain en précision (centrage sur l'offset)
\\- - Maximisation de la plage de conversion ( réajustement de l'offset )


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Correcteur Avance de phase
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Correcteur Avance de phase}

Liste
\\- Choix du montage
\\- Choix dex couples R-C ( Cf Meca ) ( Choix des série E6, E12 et du type des condensateurs)
\\- Etude du gain du montage


\subsection{Données}

\noindent
Pour le schémas et les formules (que nous avons quand même vérifié) du correcteur, nous nous sommes servi d'un schémas trouvé sur internet (voir Bibliographie) :

\begin{center}
\includegraphics[width = 15cm]{SolutionAnalogique/Avph.png} 
\end{center}

\vspace{0.5cm}

Dans ce schémas, le produit $R_1*C_1$ correspond à la constante $ T_av$ définie dans le rapport d'automatique et le produit $R_2*C_2$ correspond à $0.1*T_av$.


Nous allons déterminer les valeurs de $R_1$, $R_2$, $C_1$ et $C_2$ dans deux configurations : poids du mobile à $0.0897 kg$ correspondant à un $T_av$ de 0.0313 et poids du mobile à $0.1414 kg$ correspondant à un $T_av$ de 0.0393.


Aussi, par le biais de MATLAB, nous avons pu obtenir la courbe théorique de notre correcteur par avance de phase :

\begin{center}
\includegraphics[width = 15cm]{SolutionAnalogique/aphmat.png} 
\end{center}

A noter que la fréquence donnée est en $rad.s^-1$, elle vaut environ 16Hz. 
\subsection{Détermination de valeurs des composants}

Pour des raisons de simplifications, nous prendrons les résistances $R_1$ et $R_2$ égales, le facteur 10 entre les constantes du numérateur et du dénominateur sera donc réalisé par un facteur 10 entre les valeurs des condensateurs. 



Pour le poids de $0.0897 kg$, en choisissant des composants avec des valeurs normalisées, on obtient $R=8.2 K\Omega$, $C_1=3.9 \mu F$ et $C_2=390 nF$. 



On fera plutôt varier les résistances que les condensateurs pour s'adapter au changement de poids. On conserve donc les mêmes valeurs de condensateurs. On trouve alors $R=10.076 K\Omega$. 



Il sera donc possible de prendre des potentiomètres pour ajuster les constantes, corrigeant ainsi les écards possibles des valeurs de condensateurs. 


\subsection{Validation par simulation PSpice}

On simule le correcteur à avance de phase par le schémas suivant : 

\begin{center}
\includegraphics[width = 15cm]{SolutionAnalogique/schAvph.png} 
\end{center}

On obtient le résultat de simulation suivant : 

\begin{center}
\includegraphics[width = 15cm]{SolutionAnalogique/simuAvph.png} 
\end{center}

Comme on peut le voir en comparant par rapport au résultat donné par MATLAB, le schéma répond comme on le souhaitait. 

\vspace{0.5cm}
\subsection{Conclusion}

\noindent
Nous avons donc validé notre choix de montage de correcteur et nous avons déterminer des valeurs admissibles de composants analogiques grâce à cette étude. Il faudra cependant être attentif quant au choix des condensateurs vis-à-vis de leur fréquence de fonctionnement.  

\subsection{Bibliographie}

- Cours de GEE, A. Meghebbar :
\newline \textit{\underline{fsi.univ-tlemcen.dz/cours/Support-Cours-Commande-Analogique-Master-Electrotechnique10.pdf}}


\section{Conversion \& Comunication}
\subsection{Choix du microcontrolleur}
Liste
\\- Tension d'alimentation
\\- Frequence de travail
\\- module de conversion
\\- Disponibilité des outils de dev
\\- instructions evoluées MUL \& DIV pour le correcteur numérique

\subsection{Conversion A/D - PWM}
Liste
\\- Utilisation des modules
\\- Programme + Explications

\subsection{Communication serie/USB}
Liste
\\- Ajout d'un driver USB/Série
\\ Programme le cas échéant

\section{Control de puissance}
Liste
\\- choix du pont complet ( Justification )
\\-  - Attraction | Répulsion de la bobine
\\-  - Asservissement à l'équilibre ?
\\- Choix du composant
\\- Réalisation PCB
\\-  - Problème thermique
\\-  - Problème de boitier
\\- Utilisation du four à réfusion

\subsection{Données}

\noindent
D'après la Datasheet du A4950 :

\vspace{0.5cm}

\noindent
$ 
R_{TH} = 62 \char123C/W  \\
T_{JUNC\_MAX} = 160 \char123C  \\
T_{AMB} = 25\char123C  \\
R_{DSON} = 1.3 \Omega  \\
$



\noindent
A noter que cette valeur de $R_{TH}$ est donnée dans le cas l'on a aurait des plages de cuivres d'environ 2cm par 2cm de chaque côté du composant. De plus, la valeur de $R_{DSON}$ est une valeur pire cas.

\subsection{Equations}

\noindent
L'équation de la température de la jonction est donnée par :

\vspace{0.5cm}

\noindent
$
T_{JUNC} = R_{TH} * P_{DIS} + T_{AMB}
$

\vspace{0.5cm}

\noindent
P étant la puissance \textbf{dissipée} dans le composant que l'on calculera par la formule :

\vspace{0.5cm}

\noindent
$
P_{DIS} = R_{DSON} * I\up{2} = 1.3 * 1.28\up{2} = 5.2 W
$

\vspace{0.5cm}

\noindent
Finalement, on obtient :

\vspace{0.5cm}

\noindent
$
T_{JUNC} = 62 * 5.2 + 25 = 157.06 \char123C
$

\subsection{Conclusion}

\noindent
Le résultat trouvé est très proche de la valeur limite du composant. Cependant, nous avons pris des paramètres extrèmes qui ne seront normalent pas atteint. De plus, nous comptons augmenter la surface de cuivre qui assurera la dissipation afin d'obtenir une marge plus grande par rapport à ce résultat.

\section{Résultats - Evolution}
Liste
\\- Monitoring du fonctionnement
\\- Résulatat expérience
\\- Ouverture vers correcteur numérique

\end{document}
